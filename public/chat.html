<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An!mied - Messages</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="./styles/style.css">
    <link rel="stylesheet" href="./styles/chat-style.css">
</head>
<body>
    <!-- Header Section (same as homepage) -->
    <header>
        <div class="header-container">
            <a href="./home.html" class="logo">
                <img src="./Images/A.png" alt="" class="logo-img">
                An!mied
            </a>
            
            <div class="search-bar">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Search for ideas">
            </div>
            
            <div class="nav-icons">
                <a href="#" class="nav-icon" id="upload-btn">
                    <i class="fas fa-plus"></i>
                    <span>Upload</span>
                </a>
                <a href="./profile.html" class="nav-icon">
                    <div class="profile-img">U</div>
                    <span>Profile</span>
                </a>
            </div>
        </div>
    </header>

    <!-- Main Chat Content -->
    <main>
        <div class="chat-container">
            <!-- Conversations sidebar -->
            <div class="conversations-sidebar" id="conversations-sidebar">
                <div class="conversations-header">
                    <h2>Messages</h2>
                    <div class="new-chat-btn" id="new-chat-btn">
                        <i class="fas fa-plus"></i>
                    </div>
                </div>
                
                <div class="conversations-search">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search messages">
                </div>
                
                <div class="conversations-list">
                    <!-- Conversation items will be generated by JavaScript -->
                </div>
            </div>
            
            <!-- Chat main area -->
            <div class="chat-main">
                <div class="chat-header">
                    <div class="back-button" id="back-button">
                        <i class="fas fa-arrow-left"></i>
                    </div>
                    <div class="chat-user">
                        <div class="chat-user-avatar">J</div>
                        <div class="chat-user-info">
                            <h3>Jessica Parker</h3>
                            <p>Active 10m ago</p>
                        </div>
                    </div>
                </div>
                
                <div class="messages-container" id="messages-container">
                    <!-- Messages will be generated by JavaScript -->
                </div>
                
                <div class="message-input-container">
                    <div class="message-input-wrapper">
                        <textarea class="message-input" placeholder="Type a message..." rows="1"></textarea>
                        <div class="input-actions">
                            <div class="input-action">
                                <i class="fas fa-image"></i>
                            </div>
                            <div class="input-action">
                                <i class="fas fa-paperclip"></i>
                            </div>
                            <div class="input-action">
                                <i class="fas fa-heart"></i>
                            </div>
                        </div>
                        <div class="send-btn" id="send-btn">
                            <i class="fas fa-paper-plane"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Sample conversation data
        const conversations = [
            { 
                id: 1, 
                name: "Jessica Parker", 
                avatar: "J", 
                lastMessage: "That's a great idea for home decor!", 
                time: "10:24 AM", 
                unread: 2 
            },
            { 
                id: 2, 
                name: "Michael Chen", 
                avatar: "M", 
                lastMessage: "Thanks for the recipe suggestion!", 
                time: "Yesterday", 
                unread: 0 
            },
            { 
                id: 3, 
                name: "Sarah Johnson", 
                avatar: "S", 
                lastMessage: "Where did you take that amazing photo?", 
                time: "Wednesday", 
                unread: 5 
            },
            { 
                id: 4, 
                name: "Design Inspiration", 
                avatar: "D", 
                lastMessage: "New interior design trends for 2023", 
                time: "Oct 12", 
                unread: 0 
            },
            { 
                id: 5, 
                name: "Travel Enthusiasts", 
                avatar: "T", 
                lastMessage: "Alex: The beaches in Bali are incredible!", 
                time: "Oct 10", 
                unread: 0 
            },
            { 
                id: 6, 
                name: "Food Lovers Group", 
                avatar: "F", 
                lastMessage: "Maria: Just tried this recipe, it was delicious!", 
                time: "Oct 5", 
                unread: 23 
            },
            { 
                id: 7, 
                name: "David Wilson", 
                avatar: "D", 
                lastMessage: "Let's collaborate on that project", 
                time: "Sep 28", 
                unread: 0 
            },
            { 
                id: 8, 
                name: "Emma Thompson", 
                avatar: "E", 
                lastMessage: "Can you share the link to that product?", 
                time: "Sep 20", 
                unread: 1 
            }
        ];

        // Sample messages data
        const messages = [
            { id: 1, sender: "received", content: "Hi there! I saw your minimalist living room design and I'm in love with it!", time: "10:15 AM" },
            { id: 2, sender: "sent", content: "Thank you! I'm glad you like it. It was actually quite simple to put together.", time: "10:16 AM" },
            { id: 3, sender: "received", content: "Really? I've been trying to achieve that look but can't seem to get it right. Any tips?", time: "10:18 AM" },
            { id: 4, sender: "sent", content: "Sure! The key is to stick to a limited color palette and focus on textures rather than patterns.", time: "10:19 AM" },
            { id: 5, sender: "received", content: "That makes sense. What about furniture placement? Your space looks so open and airy!", time: "10:20 AM" },
            { id: 6, sender: "sent", content: "I kept furniture away from walls and used floating shelves instead of bulky bookcases. Less is more!", time: "10:22 AM" },
            { id: 7, sender: "received", content: "That's a great idea for making a small space feel larger. I'll definitely try that!", time: "10:24 AM" },
            { id: 8, sender: "sent", content: "Good luck! Feel free to ask if you need more advice. I'd be happy to help.", time: "10:25 AM" }
        ];

        // Generate conversation list
        function generateConversations() {
            const conversationsList = document.querySelector('.conversations-list');
            conversationsList.innerHTML = '';
            
            conversations.forEach(conversation => {
                const conversationItem = document.createElement('div');
                conversationItem.className = 'conversation-item';
                conversationItem.dataset.id = conversation.id;
                
                conversationItem.innerHTML = `
                    <div class="conversation-avatar">${conversation.avatar}</div>
                    <div class="conversation-info">
                        <div class="conversation-top">
                            <div class="conversation-name">${conversation.name}</div>
                            <div class="conversation-time">${conversation.time}</div>
                        </div>
                        <div class="conversation-lastmsg">${conversation.lastMessage}</div>
                    </div>
                    ${conversation.unread > 0 ? `<div class="unread-count">${conversation.unread}</div>` : ''}
                `;
                
                conversationsList.appendChild(conversationItem);
            });
        }

        // Generate messages
        function generateMessages() {
            const messagesContainer = document.getElementById('messages-container');
            messagesContainer.innerHTML = '';
            
            messages.forEach(message => {
                const messageElement = document.createElement('div');
                messageElement.className = `message ${message.sender}`;
                
                messageElement.innerHTML = `
                    <div class="message-avatar">${message.sender === 'sent' ? 'U' : 'J'}</div>
                    <div class="message-content">
                        <div class="message-bubble">${message.content}</div>
                        <div class="message-time">${message.time}</div>
                    </div>
                `;
                
                messagesContainer.appendChild(messageElement);
            });
            
            // Scroll to bottom of messages
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Toggle conversations sidebar on mobile
        function toggleSidebar() {
            const sidebar = document.getElementById('conversations-sidebar');
            sidebar.classList.toggle('active');
        }

        // Initialize chat on page load
        document.addEventListener('DOMContentLoaded', () => {
            generateConversations();
            generateMessages();
            
            // Add event listener for back button (mobile)
            document.getElementById('back-button').addEventListener('click', toggleSidebar);
            
            // Add event listeners for conversation items
            const conversationItems = document.querySelectorAll('.conversation-item');
            conversationItems.forEach(item => {
                item.addEventListener('click', () => {
                    // On mobile, hide sidebar after selecting a conversation
                    if (window.innerWidth <= 768) {
                        toggleSidebar();
                    }
                });
            });
            
            // Send message functionality
            document.getElementById('send-btn').addEventListener('click', sendMessage);
            document.querySelector('.message-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
            
            // Auto-resize textarea
            const textarea = document.querySelector('.message-input');
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
            });
        });

        // Function to send a new message
        function sendMessage() {
            const input = document.querySelector('.message-input');
            const message = input.value.trim();
            
            if (message) {
                const messagesContainer = document.getElementById('messages-container');
                const now = new Date();
                const time = now.getHours() + ':' + (now.getMinutes() < 10 ? '0' : '') + now.getMinutes();
                
                const messageElement = document.createElement('div');
                messageElement.className = 'message sent';
                messageElement.innerHTML = `
                    <div class="message-avatar">U</div>
                    <div class="message-content">
                        <div class="message-bubble">${message}</div>
                        <div class="message-time">${time}</div>
                    </div>
                `;
                
                messagesContainer.appendChild(messageElement);
                input.value = '';
                input.style.height = 'auto';
                
                // Scroll to bottom
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
                
                // Simulate reply after a short delay
                setTimeout(() => {
                    const replyElement = document.createElement('div');
                    replyElement.className = 'message received';
                    replyElement.innerHTML = `
                        <div class="message-avatar">J</div>
                        <div class="message-content">
                            <div class="message-bubble">Thanks for your message! I'll get back to you soon.</div>
                            <div class="message-time">${time}</div>
                        </div>
                    `;
                    
                    messagesContainer.appendChild(replyElement);
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                }, 1000);
            }
        }
    </script>
</body>
</html>